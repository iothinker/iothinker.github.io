<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>HA南京水费插件</title>
      <link href="2021/04/02/njwater/"/>
      <url>2021/04/02/njwater/</url>
      
        <content type="html"><![CDATA[<h3 id="0-插件准备"><a href="#0-插件准备" class="headerlink" title="0.插件准备"></a>0.插件准备</h3><p>a) 登录<a href="http://www.jlwater.com/login.html">南京水务</a>的官网</p><p>b) 按住F12进入开发者模式</p><p>c) 拿到cookie和客户号</p><p>结果如图：</p><p><img src="/img/njwater/njwater01.png" alt="结果截图"></p><h3 id="1-配置HA"><a href="#1-配置HA" class="headerlink" title="1.配置HA"></a>1.配置HA</h3><p>将自定义插件上传到对应的目录下</p><p>custom_components<br>└─nanjing_water<br>        sensor.py<br>        __init__.py</p><p>接着在 configuration.yaml 中添加</p><p><strong>sensor:</strong></p><p>  <strong>- platform: nanjing_water</strong><br>     <strong>name: ‘水费’</strong><br>     <strong>custno: ‘XXXXX’</strong><br>     <strong>cookies: ‘XXXXXXXXXXXXXX’</strong></p><h3 id="2-重启HA"><a href="#2-重启HA" class="headerlink" title="2.重启HA"></a>2.重启HA</h3><h3 id="3-结果展示"><a href="#3-结果展示" class="headerlink" title="3.结果展示"></a>3.结果展示</h3><p><img src="/img/njwater/njwater02.png" alt="结果截图"></p><h3 id="4-代码展示"><a href="#4-代码展示" class="headerlink" title="4.代码展示"></a>4.代码展示</h3><pre class="line-numbers language-none"><code class="language-none">"""Support for nanjing waterAuthor:    freefitterCreated:    2019-08-21"""import loggingfrom homeassistant.const import (    CONF_API_KEY, CONF_NAME, ATTR_ATTRIBUTION, CONF_ID    )from homeassistant.helpers.entity import Entityimport homeassistant.helpers.config_validation as cvimport voluptuous as volfrom homeassistant.components.sensor import PLATFORM_SCHEMAimport requestsfrom bs4 import BeautifulSoup_Log=logging.getLogger(name)DEFAULT_NAME = 'nanjing_water'COOKIES = 'cookies'CUSTNO = 'custno'PLATFORM_SCHEMA = PLATFORM_SCHEMA.extend({    vol.Required(COOKIES): cv.string,    vol.Required(CUSTNO): cv.string,    vol.Optional(CONF_NAME, default= DEFAULT_NAME): cv.string,})HEADERS = {    'Connection': 'keep-alive',    'Upgrade-Insecure-Requests': '1',    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,/;q=0.8',    'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 12_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/7.0.5(0x17000523) NetType/WIFI Language/zh_CN',    'Referer': 'http://www.jlwater.com/waterFee/waterWx',    'Accept-Language': 'zh-cn',    'Accept-Encoding': 'gzip, deflate'}API_URL = "http://www.jlwater.com/waterFee/detail"def setup_platform(hass, config, add_devices, discovery_info=None):    cookies = config.get(COOKIES)    custno = config.get(CUSTNO)    sensor_name = config.get(CONF_NAME)    query_dict = {        'consNo': custno,    }    HEADERS["Cookie"] = cookies    add_devices([NanjingWater(sensor_name,query_dict,cookies)])class NanjingWater(Entity):    """Representation of a Nanjing water """    def init(self,sensor_name,query_dict,cookies):        self.attributes = {}        self.state = None        self.query_dict = query_dict        self.name = sensor_name        self.cookies = cookies<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-附件下载"><a href="#5-附件下载" class="headerlink" title="5. 附件下载"></a>5. 附件下载</h3><p>附件可以去论坛上下载 <a href="https://bbs.hassbian.com/thread-11955-1-1.html">南京水费插件</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> HA </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>少儿编程之Scratch</title>
      <link href="2020/07/06/scratch/"/>
      <url>2020/07/06/scratch/</url>
      
        <content type="html"><![CDATA[<h3 id="0-Scratch安装体验"><a href="#0-Scratch安装体验" class="headerlink" title="0.Scratch安装体验"></a>0.<strong>Scratch</strong>安装体验</h3><p>少儿编程软件<strong>Scratch</strong>是美国麻省理工提供的一款软件，Scratch3.0可以更好的支持外部硬件模块，并且能够与Makey,micro,We Do 2.0机器人，乐高 EV3机器人交互。</p><h3 id="1-软件下载"><a href="#1-软件下载" class="headerlink" title="1.软件下载"></a>1.软件下载</h3><p>从<a href="https://scratch.mit.edu/download">Scratch官网下载</a>，当然你也可以先从<a href="https://scratch.mit.edu/projects/editor/?tutorial=getStarted">这个地址</a>开始尝试。下载的页面和尝试的页面如下：</p><p><img src="/img/scratchdownload.png" alt="scratch下载"></p><p><img src="/img/scratchinfo.png" alt="scratch信息"></p><p>安装后的界面如下：</p><p><img src="/img/scratchdesktop.png" alt="scratch软件界面"></p><p>和网页版的基本没差。</p><h3 id="2-开始HelloWord"><a href="#2-开始HelloWord" class="headerlink" title="2.开始HelloWord"></a>2.开始HelloWord</h3><p>第一个小玩意：</p><p>代码：</p><p><img src="/img/helloworld.png" alt="helloworld图"></p><p>效果：</p><p><img src="/img/helloworld.gif" alt="helloworld"></p><h3 id="3-后续想法"><a href="#3-后续想法" class="headerlink" title="3.后续想法"></a>3.后续想法</h3><p>结合硬件做一些东西</p>]]></content>
      
      
      
        <tags>
            
            <tag> Scratch </tag>
            
            <tag> 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>智能家居体验与感受</title>
      <link href="2020/06/17/smartHome/"/>
      <url>2020/06/17/smartHome/</url>
      
        <content type="html"><![CDATA[<h2 id="0-入坑原因："><a href="#0-入坑原因：" class="headerlink" title="0.入坑原因："></a>0.入坑原因：</h2><p>​        家里装修完了，然后想自己搞点不一样的东西，能够让自己偷偷懒，还能够方便家里人使用。一开始啥也不知道，也不知道选择啥。也没有想到自己的做，想着用成熟的东西搭建自己的智能家居。正好家附近有个小米之家，去看了看。然后就入手了<a href="https://www.mi.com/buy/detail?product_id=5708&amp;cfrom=search">米家智能套装</a>，是最早一批的智能的东西。<img src="/img/mihome.jpg" alt="米家智能套装"></p><p>从这开始便开始了智能家居之旅。紧接着又入手了很多的智能设备和智能开关。现在的设备已经达到80个之多。</p><h2 id="1-米家APP体验"><a href="#1-米家APP体验" class="headerlink" title="1.米家APP体验"></a>1.米家APP体验</h2><p>​      有了这些智能设备之后，如果要让它们能够联合起来做一些事情，你得自己编写一个智能，条件可以是你现在的传感器或者他自己提供的一些东西，操作的设备只能是你的智能设备或者你的手机了，米家App基本上能够满足大部分人的需求了，但是有些像设置更细节的东西，他就爱莫能助了。</p><h2 id="2-入坑HomeAssistant"><a href="#2-入坑HomeAssistant" class="headerlink" title="2.入坑HomeAssistant"></a>2.入坑HomeAssistant</h2><p>​     有了这些硬件设备，但是又不甘于被米家App束缚，所以就开始找有没有别的啥能够支持这些智能硬件，找着找着找到HA，这个东西还是很强大的。可以自己编写传感器，可定制化程度非常高，能够完成很多米家App不能完成的事情。可以去<a href="https://bbs.hassbian.com/">瀚思彼岸</a> 论坛学习各个神的操作。</p><h2 id="3-如今的智能设备"><a href="#3-如今的智能设备" class="headerlink" title="3.如今的智能设备"></a>3.如今的智能设备</h2><p>​     现在家里的智能设备已经80多个了，很多已经接入了HA，但是还有少数设备没有接入其中。后面陆陆续续的接入到当中去。因为一开始没有买小米全家桶，所以很多的都是使用智能开关来控制设备的，所以家中的智能插座和智能开关比较多。</p><h2 id="4-后话"><a href="#4-后话" class="headerlink" title="4. 后话"></a>4. 后话</h2><p>​     智能家居还是要从开始进行规划，等自己以后有能力在买一套的时候，一定要彻头彻尾的搞一次真正的智能家居</p>]]></content>
      
      
      
        <tags>
            
            <tag> 智能家居 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客搭建</title>
      <link href="2020/06/08/startPage/"/>
      <url>2020/06/08/startPage/</url>
      
        <content type="html"><![CDATA[<h2 id="搭建Hexo"><a href="#搭建Hexo" class="headerlink" title="搭建Hexo"></a>搭建Hexo</h2><p>之前自己搭建<a href="http://freefitter.com:1200/">wordpress</a>的博客，网上搜索下，还有人推荐Hexo的，然后就尝试着自己搞了个玩玩，发现并不复杂<br>参照了<a href="https://www.jianshu.com/p/4818be9093f5">这个教程</a>还有<a href="https://hexo.fluid-dev.com/docs/">官方的文档</a>。三下五除二干了起来。</p><h2 id="展示"><a href="#展示" class="headerlink" title="展示"></a>展示</h2><p>   搭建完成就是这样啦! <img src="/img/pre.png" alt="成果展示"> 赶脚还行。</p><h2 id="说在最后"><a href="#说在最后" class="headerlink" title="说在最后"></a>说在最后</h2><p>   自己瞎折腾，没事整点事</p>]]></content>
      
      
      
        <tags>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
