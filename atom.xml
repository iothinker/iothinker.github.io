<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å®é™è‡´è¿œ</title>
  
  <subtitle>é™å¿ƒæ•´ç†/åˆ†äº«ç”Ÿæ´»</subtitle>
  <link href="https://www.wangxingyang.com/atom.xml" rel="self"/>
  
  <link href="https://www.wangxingyang.com/"/>
  <updated>2022-04-07T02:16:34.316Z</updated>
  <id>https://www.wangxingyang.com/</id>
  
  <author>
    <name>å½¤çˆ¸æ¯”</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å‡æ—¥åˆ†äº«</title>
    <link href="https://www.wangxingyang.com/dayshare220404.html"/>
    <image>https://www.wangxingyang.com/img/20220404/cover.jpg</image>
    <notify>true</notify>
    <id>https://www.wangxingyang.com/dayshare220404.html</id>
    <published>2022-04-05T01:14:34.000Z</published>
    <updated>2022-04-07T02:16:34.316Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>3å¤©çš„å°å‡æœŸï¼Œå¤©å¤©åœ¨å®¶é—·åäº†ï¼Œå—äº¬çš„ç–«æƒ…ä¹Ÿå¥½è½¬äº†ï¼Œæ‰€ä»¥å‡†å¤‡å¸¦å½¤å®å‡ºå»ç©ç©ã€‚å½¤å½¤è¯´è¦å‡ºå»æ­å¸ç¯·ï¼Œè¦å»æŒ–æ²™å­ã€‚ä¸çŸ¥é“èƒ½å®Œæˆå‡ ä¸ªå‘¢ã€‚</p></blockquote><h3 id="0-å¼€è½¦å‡ºå»ç©"><a href="#0-å¼€è½¦å‡ºå»ç©" class="headerlink" title="0.å¼€è½¦å‡ºå»ç©"></a>0.å¼€è½¦å‡ºå»ç©</h3><hr><p>ä»Šå¤©å¼€è½¦å‡†å¤‡å»<strong>ä¸è€æ‘</strong>ç©ï¼Œä½†æ˜¯æ—©ä¸Šèµ·çš„æœ‰ç‚¹æ™šï¼Œæ­å¸ç¯·ä¼°è®¡æ˜¯ç©ä¸èµ·æ¥äº†ï¼Œæ‰€ä»¥å°±å‡†å¤‡å»é‚£è¾¹çœ‹çœ‹ï¼ŒæŒ–æŒ–æ²™å­ã€‚ç­‰åˆ°äº†ä¹‹åå‘ç°ï¼Œä¸è€æ‘é—­å›­ï¼Œä¸å¾—ä¸è½¬æˆ˜åˆ«çš„åœ°æ–¹ã€‚å»äº†é™„è¿‘çš„å…°æºªå…¬å›­æŒ–æ²™å­å»ã€‚ä¸‹é¢å’±ä»¬ä¸€èµ·å»çœ‹çœ‹å§ã€‚</p><p><img src="/img/20220404/0.jpg" alt="ä¸è€æ‘é—­å›­"></p><p>é—­å›­äº†äººä¹Ÿä¸å°‘ï¼Œå‡†å¤‡æ‰å¤´å»å…°æºªå…¬å›­</p><p><img src="/img/20220404/1.jpg" alt="æ¯”âœŒï¸"></p><p><img src="/img/20220404/2.jpg" alt="æ¯”âœŒï¸"></p><p><img src="/img/20220404/3.jpg" alt="æŠ“æ‹"></p><p><img src="/img/20220404/4.jpg" alt="å¼€å§‹æŒ–æ²™å­"></p><p><img src="/img/20220404/5.jpg" alt="æŒ–æ²™å­ä¸­"></p><p><img src="/img/20220404/%C3%9F%C3%9F6.jpg" alt="æŒ–æ²™å­ä¸­"></p><p>æ²™å­æŒ–å®Œäº†ï¼Œå°±å›å®¶åšæŠ«è¨äº†ï¼Œ</p><p><img src="/img/20220404/11.jpg" alt="å¼€å§‹çƒ¤æŠ«è¨ğŸ•"></p><h3 id="1-çº¦ä¸Šå°ä¼™ä¼´"><a href="#1-çº¦ä¸Šå°ä¼™ä¼´" class="headerlink" title="1.çº¦ä¸Šå°ä¼™ä¼´"></a>1.çº¦ä¸Šå°ä¼™ä¼´</h3><hr><p>ç¦å®åˆå›åˆ°è¿™è¾¹æ¥ä½äº†ï¼Œæ‰€ä»¥å°±çº¦ç€å‡ºå»ä¸€èµ·éª‘æ»‘æ¿è½¦ï¼Œæ­£å¥½å¥¹ä¹°çš„ç©å…·å°çŒªä¹Ÿåˆ°äº†ï¼Œè¿«ä¸åŠå¾…çš„æƒ³è¦ç©ã€‚ä¸‹é¢çœ‹çœ‹ç…§ç‰‡å§ã€‚</p><p><img src="/img/20220404/7.jpg" alt="å‡†å¤‡æ¯”èµ›"></p><p><img src="/img/20220404/8.jpg" alt="æ¯”èµ›å¼€å§‹"></p><p><img src="/img/20220404/71.jpg" alt="ç‰µç€å°çŒª"></p><p><img src="/img/20220404/9.jpg" alt="è¶´åœ¨å¥¹å¦ˆèƒŒä¸Š"></p><p><img src="/img/20220404/12.jpg" alt="æ‰äº†å°è¾«å­"></p><p><img src="/img/20220404/13.jpg" alt="æ‰å°è¾«"></p><p>æ™šä¸Šå›å»åšäº†ä¸ªåƒå±‚è›‹ç³•ï¼Œçœ‹èµ·æ¥è¿˜ä¸é”™ã€‚</p><p><img src="/img/20220404/10.jpeg" alt="åƒå±‚è›‹ç³•"></p><h3 id="2-å†™åœ¨æœ€å"><a href="#2-å†™åœ¨æœ€å" class="headerlink" title="2.å†™åœ¨æœ€å"></a>2.å†™åœ¨æœ€å</h3><hr><p>å½¤å½¤çœŸçš„åœ¨ä¸€å¤©å¤©é•¿å¤§ï¼Œçªç„¶å‘ç°è‡ªå·±å¹¶ä¸æ˜¯é‚£ä¹ˆçš„å¥½ï¼Œè„¾æ°”è¿˜æ˜¯å¾—æ”¶æ•›æ”¶æ•›ï¼Œå¥½å¥½çš„å’Œå¥¹ä¸€èµ·æˆé•¿ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;3å¤©çš„å°å‡æœŸï¼Œå¤©å¤©åœ¨å®¶é—·åäº†ï¼Œå—äº¬çš„ç–«æƒ…ä¹Ÿå¥½è½¬äº†ï¼Œæ‰€ä»¥å‡†å¤‡å¸¦å½¤å®å‡ºå»ç©ç©ã€‚å½¤å½¤è¯´è¦å‡ºå»æ­å¸ç¯·ï¼Œè¦å»æŒ–æ²™å­ã€‚ä¸çŸ¥é“èƒ½å®Œæˆå‡ ä¸ªå‘¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;0-å¼€è½¦å‡ºå»ç©&quot;&gt;&lt;a href=&quot;#0-å¼€è½¦å‡ºå»ç©&quot; class=</summary>
      
    
    
    
    <category term="ç”Ÿæ´»" scheme="https://www.wangxingyang.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="é›å¨ƒ" scheme="https://www.wangxingyang.com/tags/%E9%81%9B%E5%A8%83/"/>
    
    <category term="ç¾é£Ÿ" scheme="https://www.wangxingyang.com/tags/%E7%BE%8E%E9%A3%9F/"/>
    
  </entry>
  
  <entry>
    <title>åšå®¢å‘æ–‡é€šçŸ¥</title>
    <link href="https://www.wangxingyang.com/qywechat.html"/>
    <image>https://www.wangxingyang.com/img/20220401/cover.jpg</image>
    <notify>true</notify>
    <id>https://www.wangxingyang.com/qywechat.html</id>
    <published>2022-04-01T07:02:19.000Z</published>
    <updated>2022-04-01T07:44:51.698Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¹‹å‰æ›´æ–°å…³äºå½¤å®çš„åšå®¢ä¼šåˆ†äº«ç»™è€å©†ï¼Œä½†æ˜¯æ¯æ¬¡æ‰‹åŠ¨åˆ†äº«æœ‰ç‚¹éº»çƒ¦ï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ç¯‡æ–‡ç« äº†ã€‚</p></blockquote><h3 id="0-å‰æœŸå‡†å¤‡"><a href="#0-å‰æœŸå‡†å¤‡" class="headerlink" title="0.å‰æœŸå‡†å¤‡"></a>0.å‰æœŸå‡†å¤‡</h3><hr><ol start="0"><li>é¦–å…ˆåšå®¢å¼€å¯<strong>RSS</strong>ï¼Œè¿™ä¸ªç½‘ä¸Šæœ‰å¾ˆå¤šçš„æ•™ç¨‹ï¼Œè¿™è¾¹å°±ä¸å¤šèµ˜è¿°äº†ï¼Œæ”¾ä¸ª<a href="https/img/20220401//segmentfault.com/a/1190000012647294">ä¸ºhexoåšå®¢æ·»åŠ RSSè®¢é˜…åŠŸèƒ½</a>çš„é“¾æ¥ã€‚</li><li>ç¼–å†™<strong>ä¼ä¸šå¾®ä¿¡é€šçŸ¥</strong>ç®€å•çš„ç¨‹åºï¼Œè¿™ä¸ªåé¢è¯´</li><li>éœ€è¦ç¼–å†™ä¸€ä¸ª<strong>Node-RED</strong>æµ</li></ol><h3 id="1-å¼€å§‹æŠ˜è…¾"><a href="#1-å¼€å§‹æŠ˜è…¾" class="headerlink" title="1.å¼€å§‹æŠ˜è…¾"></a>1.å¼€å§‹æŠ˜è…¾</h3><hr><p>å¢åŠ äº†è®¢é˜…åŠŸèƒ½ä¹‹åï¼Œå°±èƒ½å¤Ÿé€šè¿‡ä»–æ¥è·å¾—åšå®¢ç½‘ç«™ä»¥åŠæ–‡ç« çš„ä¿¡æ¯ï¼Œå†…å®¹å¦‚ä¸‹å›¾æ‰€ç¤º<br><img src="/img/20220401/9ba2d8477659519542ef5aa9b9120e09.jpg" alt="RSS"><br>ä¸è¿‡ <strong>image</strong> è¿™ä¸ªå­—æ®µæ˜¯åé¢è‡ªå·±åŠ ä¸Šçš„ï¼Œå› ä¸ºæ¨é€çš„æ—¶å€™æƒ³æŠŠå°é¢ä¹Ÿæ¨é€è¿‡å»ã€‚ä¿®æ”¹çš„åœ°æ–¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># å…ˆåˆ°åˆšåˆšå®‰è£…çš„é‚£ä¸ªæ’ä»¶ç›®å½•ä¸‹cd blog/node_modules/hexo-generator-feed# ç¼–è¾‘ atom.xmlvi atom.xml <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å›¾ç¤ºä½ç½®ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span><span class="token punctuation">&gt;</span></span>{{ post.img | formatUrl}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/img/20220401/6970f3b3454623b0dd7fb084c7a34340.jpg" alt="æ·»åŠ å°é¢å›¾"><br>ã€âš ï¸æ³¨æ„ã€‘åœ¨æ–‡ç« çš„å¤´ä¸Šéœ€è¦æœ‰<code>img</code>è¿™ä¸ªå­—æ®µï¼Œå¦‚æœä½ çš„å°é¢æ˜¯åˆ«çš„å­—æ®µï¼Œæ³¨æ„æ›´æ¢ã€‚<br><img src="/img/20220401/da90a186843db9639554cbd91c7aa88f.jpg" alt="æ–‡ç« ä¸­æ ‡ç­¾"><br>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ•°æ®å·²ç»é½æ´»äº†ã€‚ä¸‹é¢æ•´ä¼ä¸šå¾®ä¿¡é€šçŸ¥çš„ä»£ç ã€‚è¿™è¾¹æ˜¯ä½¿ç”¨çš„<code>Python</code><br>ä»£ç å†™çš„æ¯”è¾ƒç®€å•ï¼ŒæŒ‰ç…§ä¼ä¸šå¾®ä¿¡çš„é€»è¾‘æ¥å³å¯ã€‚è¿™è¾¹æ˜¯<a href="https/img/20220401//developer.work.weixin.qq.com/document/path/90236">å®˜æ–¹APIåœ°å€</a>ç…§ç€æ¥å°±è¡Œã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> json<span class="token keyword">import</span> requests<span class="token keyword">from</span> bottle <span class="token keyword">import</span> route<span class="token punctuation">,</span> run<span class="token punctuation">,</span> request<span class="token keyword">import</span> configparser<span class="token keyword">from</span> requests <span class="token keyword">import</span> RequestException<span class="token punctuation">,</span> ReadTimeoutcfg <span class="token operator">=</span> configparser<span class="token punctuation">.</span>ConfigParser<span class="token punctuation">(</span><span class="token punctuation">)</span>cfg<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token string">'qy.ini'</span><span class="token punctuation">)</span>TOKEN_API <span class="token operator">=</span> <span class="token string">"https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=%s&amp;corpsecret=%s"</span>SEND_API <span class="token operator">=</span> <span class="token string">"https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=%s"</span><span class="token keyword">global</span> access_tokenaccess_token <span class="token operator">=</span> cfg<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'QYParam'</span><span class="token punctuation">,</span> <span class="token string">'access_token'</span><span class="token punctuation">)</span>agentid <span class="token operator">=</span> cfg<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'QYParam'</span><span class="token punctuation">,</span> <span class="token string">'agentid'</span><span class="token punctuation">)</span><span class="token decorator annotation punctuation">@route</span><span class="token punctuation">(</span><span class="token string">'/getToken'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># è·å¾—ä¼ä¸šä¿¡æ¯</span>    <span class="token comment"># print("getToken start")</span>    corpid <span class="token operator">=</span> cfg<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'QYParam'</span><span class="token punctuation">,</span> <span class="token string">'corpid'</span><span class="token punctuation">)</span>    corpsecret <span class="token operator">=</span> cfg<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'QYParam'</span><span class="token punctuation">,</span> <span class="token string">'corpsecret'</span><span class="token punctuation">)</span>    url <span class="token operator">=</span> TOKEN_API <span class="token operator">%</span> <span class="token punctuation">(</span>corpid<span class="token punctuation">,</span> corpsecret<span class="token punctuation">)</span>    <span class="token comment"># print("url=" + str(url))</span>    ret <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>    errcode <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token string">"errcode"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> errcode <span class="token operator">==</span> <span class="token string">"0"</span><span class="token punctuation">:</span>        <span class="token keyword">global</span> access_token        access_token <span class="token operator">=</span> ret<span class="token punctuation">[</span><span class="token string">"access_token"</span><span class="token punctuation">]</span>        cfg<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">"QYParam"</span><span class="token punctuation">,</span> <span class="token string">"access_token"</span><span class="token punctuation">,</span> ret<span class="token punctuation">[</span><span class="token string">"access_token"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        cfg<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'qy.ini'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> ret<span class="token decorator annotation punctuation">@route</span><span class="token punctuation">(</span><span class="token string">'/sendMsg'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">sendmsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    url <span class="token operator">=</span> SEND_API <span class="token operator">%</span> access_token    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"sendmsg url="</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>    data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span>        <span class="token string">"touser"</span><span class="token punctuation">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span>        <span class="token string">"msgtype"</span><span class="token punctuation">:</span> <span class="token string">"textcard"</span><span class="token punctuation">,</span>        <span class="token string">"agentid"</span><span class="token punctuation">:</span> agentid<span class="token punctuation">,</span>        <span class="token string">"textcard"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>            <span class="token string">"title"</span><span class="token punctuation">:</span> <span class="token string">"åšå®¢é€šçŸ¥"</span><span class="token punctuation">,</span>            <span class="token string">"description"</span><span class="token punctuation">:</span> <span class="token string">"&lt;div class=\"gray\"&gt;2016å¹´9æœˆ26æ—¥&lt;/div&gt; &lt;div class=\"normal\"&gt;æ­å–œä½ æŠ½ä¸­iPhone 7ä¸€å°ï¼Œé¢†å¥–ç ï¼šxxxx&lt;/div&gt;&lt;div class=\"highlight\"&gt;è¯·äº2016å¹´10æœˆ10æ—¥å‰è”ç³»è¡Œæ”¿åŒäº‹é¢†å–&lt;/div&gt;"</span><span class="token punctuation">,</span>            <span class="token string">"url"</span><span class="token punctuation">:</span> <span class="token string">"http://www.wangxingyang.com"</span><span class="token punctuation">,</span>            <span class="token string">"btntxt"</span><span class="token punctuation">:</span> <span class="token string">"æ›´å¤š"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token string">"safe"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token string">"enable_id_trans"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token string">"enable_duplicate_check"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token string">"duplicate_check_interval"</span><span class="token punctuation">:</span> <span class="token number">1800</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span>    <span class="token keyword">except</span> ReadTimeout<span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">"Connection timeout...."</span>    <span class="token keyword">except</span> ConnectionError<span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">"Connection Error...."</span>    <span class="token keyword">except</span> RequestException<span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">"Unknown Error"</span>    ret <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>    errcode <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token string">"errcode"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> errcode <span class="token operator">==</span> <span class="token string">"42001"</span><span class="token punctuation">:</span>        <span class="token comment"># é‡æ–°è·å¾—Token</span>        getToken<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># é‡æ–°å‘é€</span>        sendmsg<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> response<span class="token punctuation">.</span>text<span class="token decorator annotation punctuation">@route</span><span class="token punctuation">(</span><span class="token string">'/sendNewsMsg'</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token string">'POST'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">sendNewsMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    url <span class="token operator">=</span> SEND_API <span class="token operator">%</span> access_token    <span class="token comment"># print("sendmsg url=" + str(url))</span>    title <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"latin1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    link <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'link'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"latin1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    img <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"latin1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    summary <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'summary'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"latin1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>    data <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{</span>       <span class="token string">"touser"</span><span class="token punctuation">:</span> <span class="token string">"xxx"</span><span class="token punctuation">,</span>       <span class="token string">"msgtype"</span><span class="token punctuation">:</span> <span class="token string">"news"</span><span class="token punctuation">,</span>       <span class="token string">"agentid"</span><span class="token punctuation">:</span> agentid<span class="token punctuation">,</span>       <span class="token string">"news"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>           <span class="token string">"articles"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>               <span class="token punctuation">{</span>                   <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span>                   <span class="token string">"description"</span><span class="token punctuation">:</span> summary<span class="token punctuation">,</span>                   <span class="token string">"url"</span><span class="token punctuation">:</span> link<span class="token punctuation">,</span>                   <span class="token string">"picurl"</span><span class="token punctuation">:</span> img<span class="token punctuation">,</span>               <span class="token punctuation">}</span>           <span class="token punctuation">]</span>       <span class="token punctuation">}</span><span class="token punctuation">,</span>       <span class="token string">"enable_id_trans"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>       <span class="token string">"enable_duplicate_check"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>       <span class="token string">"duplicate_check_interval"</span><span class="token punctuation">:</span> <span class="token number">1800</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">,</span> url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">)</span>    <span class="token keyword">except</span> ReadTimeout<span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">"Connection timeout...."</span>    <span class="token keyword">except</span> ConnectionError<span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">"Connection Error...."</span>    <span class="token keyword">except</span> RequestException<span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">"Unknown Error"</span>    ret <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>    errcode <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token string">"errcode"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> errcode <span class="token operator">==</span> <span class="token string">"42001"</span><span class="token punctuation">:</span>        <span class="token comment"># é‡æ–°è·å¾—Token</span>        getToken<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># é‡æ–°å‘é€</span>        sendmsg<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> response<span class="token punctuation">.</span>textrun<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">8080</span><span class="token punctuation">,</span> debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªä»£ç æˆ‘æ”¾åˆ°æ ‘è“æ´¾ä¸Šäº†ï¼Œæ¥ç€å°±æ˜¯é€šè¿‡<code>Node-RED</code>æ¥è°ƒè¿™ä¸ªæ¥å£ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥ç”¨<code>Node-RED</code>æ¥å®ç°ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢å°è£…ä¸‹ï¼Œä¸ç„¶æµå¾—æçš„è€é•¿ã€‚<br>æœ€åçœ‹çœ‹<strong>Node-RED</strong>æµ<br><img src="/img/20220401/6e2a064bf94f8d88e2927257a7b5afdc.jpg" alt="æµ"><br>æ²¡å•¥ç‰¹åˆ«çš„å°±ä¸è´´ä»£ç äº†ã€‚</p><p>æœ€åæ•ˆæœå¦‚ä¸‹å›¾ï¼š<br><img src="/img/20220401/37a597f192a1c1df381d8d34f31d0e0b.jpg" alt="æ•ˆæœå›¾"></p><h3 id="2-å†™åœ¨æœ€å"><a href="#2-å†™åœ¨æœ€å" class="headerlink" title="2.å†™åœ¨æœ€å"></a>2.å†™åœ¨æœ€å</h3><hr><p>è¿™ä¸ªè¿˜å¯ä»¥æ‰©å±•ï¼Œæ¯”å¦‚åŠ ä¸Šåœ¨æ–‡ç« ä¸ŠåŠ ä¸Šæ¨é€å¼€å…³ï¼Œæˆ–è€…è¦æ¨é€çš„äººï¼Œè¿™æ ·å°±å¯ä»¥å®ç°ä¸ªæ€§åŒ–é€šçŸ¥äº†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ä¹‹å‰æ›´æ–°å…³äºå½¤å®çš„åšå®¢ä¼šåˆ†äº«ç»™è€å©†ï¼Œä½†æ˜¯æ¯æ¬¡æ‰‹åŠ¨åˆ†äº«æœ‰ç‚¹éº»çƒ¦ï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ç¯‡æ–‡ç« äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;0-å‰æœŸå‡†å¤‡&quot;&gt;&lt;a href=&quot;#0-å‰æœŸå‡†å¤‡&quot; class=&quot;headerlink&quot; title=&quot;0.å‰</summary>
      
    
    
    
    <category term="æ•™ç¨‹" scheme="https://www.wangxingyang.com/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="ä¼ä¸šå¾®ä¿¡é€šçŸ¥" scheme="https://www.wangxingyang.com/tags/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E9%80%9A%E7%9F%A5/"/>
    
    <category term="RSS" scheme="https://www.wangxingyang.com/tags/RSS/"/>
    
    <category term="Node_RED" scheme="https://www.wangxingyang.com/tags/Node-RED/"/>
    
  </entry>
  
  <entry>
    <title>å‘¨æœ«åˆ†äº«</title>
    <link href="https://www.wangxingyang.com/dayshare220327.html"/>
    <image>https://www.wangxingyang.com/img/20220327/cover.jpeg</image>
    <notify>true</notify>
    <id>https://www.wangxingyang.com/dayshare220327.html</id>
    <published>2022-03-27T13:27:16.000Z</published>
    <updated>2022-04-01T07:00:41.489Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å—äº¬ç–«æƒ…ï¼Œå±…å®¶åŠå…¬ä¸€å‘¨äº†ï¼Œå‘¨æœ«åœ¨å®¶å°±æç‚¹äº‹æƒ…åšåšï¼Œæ‰€ä»¥å‡†å¤‡åšäº›è¥¿ç‚¹åƒåƒã€‚</p></blockquote><h3 id="0-ç¬¬ä¸€å¤©"><a href="#0-ç¬¬ä¸€å¤©" class="headerlink" title="0.ç¬¬ä¸€å¤©"></a>0.ç¬¬ä¸€å¤©</h3><hr><p>ç™½å¤©æ²¡å•¥äº‹æƒ…ï¼Œå°±é™ªå¥¹ç©ç©ï¼Œä¸‹å»è·‘è·‘ï¼Œæ™šä¸Šå›æ¥å¼€å§‹åšçº¸æ¯è›‹ç³•ï¼Œæ­¥éª¤å’±å°±ä¸å•°å—¦äº†ï¼Œæ™šä¸Šéƒ½æœ‰ï¼Œè¿™è¾¹äº¤ä½œä¸šã€‚çœ‹çœ‹ç»“æœå¦‚ä½•å§ã€‚</p><p><img src="/img/20220327/1.jpg" alt="åƒè›‹ç³•ğŸ§"></p><p><img src="/img/20220327/2.jpg" alt="åƒè›‹ç³•ğŸ§"><br><img src="/img/20220327/3.jpg" alt="åƒè›‹ç³•ğŸ§"></p><p><img src="/img/20220327/4.jpg" alt="æ–°é²œå‡ºç‚‰çš„ğŸ§"></p><h3 id="1-ç¬¬äºŒå¤©"><a href="#1-ç¬¬äºŒå¤©" class="headerlink" title="1.ç¬¬äºŒå¤©"></a>1.ç¬¬äºŒå¤©</h3><hr><p>æ™šä¸Šå‡†å¤‡æ¥ä¸ªæŠ«è¨ï¼Œåšçš„æ—¶å€™å‘ç°ææ–™æ²¡å‡†å¤‡é½å…¨ï¼Œæ‰€ä»¥å°±å¸¦å¥¹å‡ºå»ç©ç©ï¼Œé¡ºä¾¿ä¹°ä¸ªææ–™ï¼Œä¸‹é¢çœ‹çœ‹å½¤å®ç©æ»‘è‰æ¿å§ã€‚</p><p><img src="/img/20220327/5.jpg" alt="ååœ¨æ»‘è‰æ¿ä¸Š"></p><p><img src="/img/20220327/6.jpg" alt="å¼€æ»‘"></p><p><img src="/img/20220327/7.jpg" alt="â€œå¤´ç–¼â€çš„é€ å‹"></p><p><img src="/img/20220327/8.jpg" alt="ğŸ‘Œé€ å‹"></p><p><img src="/img/20220327/9.jpg" alt="åˆç…§"></p><p><img src="/img/20220327/10.jpg" alt="å“ˆå“ˆåˆæ˜¯ä¸€ä¸ªOK"></p><p>ä¸‹é¢çœ‹çœ‹æŠ«è¨ğŸ•çš„ç…§ç‰‡</p><p><img src="/img/20220327/11.jpeg" alt="çƒ¹é¥ªä¸­"></p><p><img src="/img/20220327/12.jpeg" alt="å‡ºé”…çš„ğŸ•"></p><h3 id="2-æ€»ç»“"><a href="#2-æ€»ç»“" class="headerlink" title="2.æ€»ç»“"></a>2.æ€»ç»“</h3><hr><p>å‘¨æœ«è‡ªå·±åŠ¨æ‰‹åšäº›ä¹‹å‰æ²¡åšè¿‡çš„ä¸œè¥¿è¿˜æ˜¯å¾ˆè§£å‹çš„ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å—äº¬ç–«æƒ…ï¼Œå±…å®¶åŠå…¬ä¸€å‘¨äº†ï¼Œå‘¨æœ«åœ¨å®¶å°±æç‚¹äº‹æƒ…åšåšï¼Œæ‰€ä»¥å‡†å¤‡åšäº›è¥¿ç‚¹åƒåƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;0-ç¬¬ä¸€å¤©&quot;&gt;&lt;a href=&quot;#0-ç¬¬ä¸€å¤©&quot; class=&quot;headerlink&quot; title=&quot;0.ç¬¬ä¸€å¤©&quot;&gt;&lt;/a&gt;</summary>
      
    
    
    
    <category term="ç”Ÿæ´»" scheme="https://www.wangxingyang.com/categories/%E7%94%9F%E6%B4%BB/"/>
    
    
    <category term="é›å¨ƒ" scheme="https://www.wangxingyang.com/tags/%E9%81%9B%E5%A8%83/"/>
    
    <category term="çº¸æ¯è›‹ç³•" scheme="https://www.wangxingyang.com/tags/%E7%BA%B8%E6%9D%AF%E8%9B%8B%E7%B3%95/"/>
    
    <category term="æŠ«è¨" scheme="https://www.wangxingyang.com/tags/%E6%8A%AB%E8%90%A8/"/>
    
  </entry>
  
  <entry>
    <title>Twikooè¯„è®ºé€šçŸ¥</title>
    <link href="https://www.wangxingyang.com/twikooComment.html"/>
    <image>https://www.wangxingyang.com/img/20220323/cover.jpg</image>
    
    <id>https://www.wangxingyang.com/twikooComment.html</id>
    <published>2022-03-23T02:33:08.000Z</published>
    <updated>2022-03-23T06:44:53.663Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åšå®¢ä¸Šçš„è¯„è®ºç³»ç»Ÿæ˜¯ç”¨çš„<a href="https://twikoo.js.org/">Twikoo</a>çš„ï¼Œå®ƒæ˜¯æœ‰è¯„è®ºé‚®ä»¶æé†’åŠŸèƒ½çš„ï¼Œæˆ‘å°è¯•äº†ä½†æ˜¯æ²¡æœ‰æˆåŠŸï¼Œæ‰€ä»¥å°±æƒ³ç”¨ä¹‹å‰çš„è‡ªå·±æ­çš„<code>Serveré…±</code>æ¥å®ç°æ–°è¯„è®ºæé†’åŠŸèƒ½ã€‚</p></blockquote><h3 id="0-æŠ“åŒ…åˆ†æ"><a href="#0-æŠ“åŒ…åˆ†æ" class="headerlink" title="0.æŠ“åŒ…åˆ†æ"></a>0.æŠ“åŒ…åˆ†æ</h3><hr><p>æ•´ä¸ªåˆ†æä¸‹æ¥ï¼Œä¸»è¦çš„æ˜¯è¯·æ±‚çš„å†…å®¹ä¸ä¸€æ ·ï¼Œè¯·æ±‚çš„URLåœ°å€éƒ½æ˜¯ä¸€æ ·çš„ã€‚<a href="https://tcb-api.tencentcloudapi.com/web?env=XXXXX">https://tcb-api.tencentcloudapi.com/web?env=XXXXX</a>ï¼Œæˆ‘æ˜¯åŸºäºè…¾è®¯äº‘å‡½æ•°æ­å»ºçš„ï¼Œå…·ä½“çš„æ•™ç¨‹ä¹‹å‰çš„æ–‡ç« ä¸­ä¹Ÿæœ‰å†™è¿‡ï¼Œè¿™è¾¹å°±ä¸å•°å—¦äº†ï¼Œè¿™é‡Œä¸»è¦ç”¨åˆ°ä¸¤ä¸ªå‡½æ•°ã€‚ä¸€ä¸ªæ˜¯åˆ·æ–°Tokençš„ï¼Œä¸€ä¸ªæ˜¯è·å¾—è¯„è®ºçš„ã€‚å†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">// åˆ·æ–°Token{"action": "auth.fetchAccessTokenWithRefreshToken","dataVersion": "2020-01-10","env": "$env","refresh_token": "$refresh_token","seqId": "$seqId"}// è·å¾—è¯„è®º{"action": "functions.invokeFunction","dataVersion": "2020-01-10","env": "$env","function_name": "twikoo","request_data": "{\"event\":\"COMMENT_GET_FOR_ADMIN\",\"per\":5,\"page\":1}","access_token": "$access_token","seqId": "$seqId"};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™è¾¹æœ‰ä¸ªå°å‘ï¼Œå°±æ˜¯ç”¨<code>Node-RED</code>çš„æ—¶å€™ä¸€ç›´æŠ¥å¦‚ä¸‹çš„é”™è¯¯ï¼š</p><pre class="line-numbers language-none"><code class="language-none">{"code": "INVALID_APP_SIGN","message": "jwt must be provided","requestId": "bf131bb336c26"}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ç”¨<code>PostMan</code>å’Œ<code>ApiPost</code>å‘é€è¯·æ±‚éƒ½èƒ½å¤ŸæˆåŠŸï¼Œä½†æ˜¯ä¸€åˆ°<code>Node-RED</code>ä¸Šå°±æŠ¥é”™ï¼Œç™¾æ€ä¸è§£ï¼Œæœ€åæŠŠå¤´å…¨éƒ¨æè¿‡å»ï¼Œä¸€ä¸ªä¸ªæ’é™¤ï¼Œæœ€åå‘ç°æ˜¯å¤´è¦åŠ ä¸Š<strong>origin</strong>è¿™ä¸ªå¤´æ‰è¡Œã€‚åŠ ä¸Šè¿™ä¸ªä¹‹åï¼ŒæŠ¥é”™å°±å˜æˆäº†ï¼š</p><pre class="line-numbers language-none"><code class="language-none">{"code": "ACCESS_TOKEN_EXPIRED","message": "Access_token expired","requestId": "0e3de4a761649"}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªé”™è¯¯å¾ˆæ˜æ˜¾äº†ï¼ŒTokenè¿‡æœŸäº†ï¼Œæ‰€ä»¥åªè¦åˆ·æ–°ä¸‹Tokenä¸€ä¸‹å°±è¡Œäº†ã€‚</p><h3 id="1-å¼€å§‹å†™æµ"><a href="#1-å¼€å§‹å†™æµ" class="headerlink" title="1.å¼€å§‹å†™æµ"></a>1.å¼€å§‹å†™æµ</h3><hr><p>æœ‰äº†ä¸Šé¢çš„é“ºå«ï¼Œå†™èµ·æ¥å°±å¾ˆç®€å•äº†ï¼Œæœ‰ä¸¤ç§åšæ³•ï¼Œä¸€ç§æ˜¯ä¸Šæ¥ç›´æ¥è°ƒç”¨åˆ·æ–°<strong>token</strong>ç„¶åå†è°ƒç”¨è·å–è¯„è®ºï¼Œè¿˜æœ‰ä¸€ç§åšæ³•æ˜¯å…ˆç”¨ç¼“å­˜çš„<strong>token</strong>è¯·æ±‚è°ƒç”¨è·å–è¯„è®ºï¼Œå¦‚æœè¿”å›<strong>token</strong>è¿‡æœŸï¼Œåˆ™å†åˆ·æ–°<strong>token</strong>å†å»è¯·æ±‚ã€‚è¿™è¾¹å›¾çœäº‹å°±ç›´æ¥ç”¨ç¬¬ä¸€ç§ã€‚<br><img src="/img/20220323/9f5f2aa893c74903a022079aa9b628a7.jpg" alt="Node-REDæµ"><br>JSONä¿¡æ¯å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"4b5ebb669cd0e232"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"comment"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ç½‘ç«™è¯„è®ºæ•°æ›´æ–°é€šçŸ¥"</span><span class="token punctuation">,</span>        <span class="token property">"info"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">90</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1280</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"2eb6253b6231925f"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"inject"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"props"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"repeat"</span><span class="token operator">:</span> <span class="token string">"3600"</span><span class="token punctuation">,</span>        <span class="token property">"crontab"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"once"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"onceDelay"</span><span class="token operator">:</span> <span class="token number">0.1</span><span class="token punctuation">,</span>        <span class="token property">"topic"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">70</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span>                <span class="token string">"de4ca953468e4720"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"de4ca953468e4720"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"function"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"åˆ·æ–°token"</span><span class="token punctuation">,</span>        <span class="token property">"func"</span><span class="token operator">:</span> <span class="token string">"var headers = {\n    \"content-type\": \"application/json;charset=UTF-8\",\n    \"origin\": \"https://www.wangxingyang.com\"\n};\n\nvar data = {\"action\":\"auth.fetchAccessTokenWithRefreshToken\",\"dataVersion\":\"2020-01-10\",\"env\":\"EEEEEE\",\"refresh_token\":\"EEEEE\",\"seqId\":\"437ef9ewde67\"};\n\nmsg.headers = headers;\n\nmsg.payload = JSON.stringify(data);\nreturn msg;"</span><span class="token punctuation">,</span>        <span class="token property">"outputs"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"noerr"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"initialize"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"finalize"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"libs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span>                <span class="token string">"439f033b91296d4d"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"439f033b91296d4d"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"http request"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"method"</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>        <span class="token property">"ret"</span><span class="token operator">:</span> <span class="token string">"obj"</span><span class="token punctuation">,</span>        <span class="token property">"paytoqs"</span><span class="token operator">:</span> <span class="token string">"ignore"</span><span class="token punctuation">,</span>        <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://tcb-api.tencentcloudapi.com/web?env=EEEEE"</span><span class="token punctuation">,</span>        <span class="token property">"tls"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"persist"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"proxy"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"authType"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"senderr"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">340</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span>                <span class="token string">"1093b292b44df7cf"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"1093b292b44df7cf"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"function"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"è¯·æ±‚è·å–è¯„è®º"</span><span class="token punctuation">,</span>        <span class="token property">"func"</span><span class="token operator">:</span> <span class="token string">"var headers = {\n    \"content-type\": \"application/json;charset=UTF-8\",\n    \"origin\": \"https://www.wangxingyang.com\"\n};\n\nvar data = {\n\t\"action\": \"functions.invokeFunction\",\n\t\"dataVersion\": \"2020-01-10\",\n\t\"env\": \"EEEEE\",\n\t\"function_name\": \"twikoo\",\n\t\"request_data\": \"{\\\"event\\\":\\\"COMMENT_GET_FOR_ADMIN\\\",\\\"per\\\":5,\\\"page\\\":1}\",\n\t\"access_token\": msg.payload.access_token,\n\t\"seqId\": \"c854eedewsc6\"\n};\n\nmsg.headers = headers;\n\nmsg.payload = JSON.stringify(data);\nreturn msg;"</span><span class="token punctuation">,</span>        <span class="token property">"outputs"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"noerr"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"initialize"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"finalize"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"libs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span>                <span class="token string">"f7ce907edcd55bcb"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"f7ce907edcd55bcb"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"http request"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"method"</span><span class="token operator">:</span> <span class="token string">"POST"</span><span class="token punctuation">,</span>        <span class="token property">"ret"</span><span class="token operator">:</span> <span class="token string">"obj"</span><span class="token punctuation">,</span>        <span class="token property">"paytoqs"</span><span class="token operator">:</span> <span class="token string">"ignore"</span><span class="token punctuation">,</span>        <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://tcb-api.tencentcloudapi.com/web?env=EEEEEE"</span><span class="token punctuation">,</span>        <span class="token property">"tls"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"persist"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"proxy"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"authType"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"senderr"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">660</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span>                <span class="token string">"9898c4f905717a13"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"9898c4f905717a13"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"json"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"property"</span><span class="token operator">:</span> <span class="token string">"payload.data.response_data"</span><span class="token punctuation">,</span>        <span class="token property">"action"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"pretty"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">790</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span>                <span class="token string">"7c1a5eb76c9ab46a"</span><span class="token punctuation">,</span>                <span class="token string">"d64dd8d502b22cff"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"7c1a5eb76c9ab46a"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"rbe"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"func"</span><span class="token operator">:</span> <span class="token string">"rbei"</span><span class="token punctuation">,</span>        <span class="token property">"gap"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"inout"</span><span class="token operator">:</span> <span class="token string">"out"</span><span class="token punctuation">,</span>        <span class="token property">"septopics"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"property"</span><span class="token operator">:</span> <span class="token string">"payload.data.response_data.count"</span><span class="token punctuation">,</span>        <span class="token property">"topi"</span><span class="token operator">:</span> <span class="token string">"topic"</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">910</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span>                <span class="token string">"9119b6c2921a0102"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"d48e19601ad7ae9f"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"http request"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"å‘é€é€šçŸ¥"</span><span class="token punctuation">,</span>        <span class="token property">"method"</span><span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>        <span class="token property">"ret"</span><span class="token operator">:</span> <span class="token string">"txt"</span><span class="token punctuation">,</span>        <span class="token property">"paytoqs"</span><span class="token operator">:</span> <span class="token string">"ignore"</span><span class="token punctuation">,</span>        <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://EEEEEEE.tencentcs.com/release/wecomchan?sendkey=EEEEE&amp;msg_type=text&amp;msg={{msgText}}&amp;to_user=EEEEE"</span><span class="token punctuation">,</span>        <span class="token property">"tls"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"persist"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"proxy"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"authType"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"senderr"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">1220</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"9119b6c2921a0102"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"function"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"è¯„è®ºå˜åŠ¨èµ‹å€¼"</span><span class="token punctuation">,</span>        <span class="token property">"func"</span><span class="token operator">:</span> <span class="token string">"let nick = msg.payload.data.response_data.data[0].nick;\nlet url = msg.payload.data.response_data.data[0].link;\nlet commentText = msg.payload.data.response_data.data[0].commentText;\n\nmsg.msgText = \"ğŸ“¢|[\" + nick + \"] åœ¨åšå®¢ä¸­è¯„è®ºé“: [ \" + commentText + \" ];\"\nreturn msg;"</span><span class="token punctuation">,</span>        <span class="token property">"outputs"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"noerr"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"initialize"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"finalize"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"libs"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">1060</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1320</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span>            <span class="token punctuation">[</span>                <span class="token string">"d48e19601ad7ae9f"</span>            <span class="token punctuation">]</span>        <span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">{</span>        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"d64dd8d502b22cff"</span><span class="token punctuation">,</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"debug"</span><span class="token punctuation">,</span>        <span class="token property">"z"</span><span class="token operator">:</span> <span class="token string">"0217ee1fba23525d"</span><span class="token punctuation">,</span>        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"active"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"tosidebar"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"console"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token property">"tostatus"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token property">"complete"</span><span class="token operator">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>        <span class="token property">"targetType"</span><span class="token operator">:</span> <span class="token string">"full"</span><span class="token punctuation">,</span>        <span class="token property">"statusVal"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>        <span class="token property">"statusType"</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span>        <span class="token property">"x"</span><span class="token operator">:</span> <span class="token number">910</span><span class="token punctuation">,</span>        <span class="token property">"y"</span><span class="token operator">:</span> <span class="token number">1280</span><span class="token punctuation">,</span>        <span class="token property">"wires"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åçš„é€šçŸ¥ç»“æœå¦‚ä¸‹ï¼š<br><img src="/img/20220323/962596d93e1a411a9a2aacd25fa491de.jpg" alt="é€šçŸ¥ç»“æœ"><br>è¿™æ ·å°±æå®šäº†ã€‚å› ä¸ºæ²¡æœ‰ä»€ä¹ˆå®æ—¶æ€§è¦æ±‚ï¼Œæ‰€ä»¥è¿™è¾¹æ˜¯æ¯ä¸ªå°æ—¶è·å–ä¸€æ¬¡ã€‚å¦‚æœè·å–æ—¶é—´é—´éš”æ¯”è¾ƒçŸ­ï¼Œå»ºè®®æŠŠTokenç¼“å­˜èµ·æ¥ã€‚</p><h3 id="2-å†™åœ¨æœ€å"><a href="#2-å†™åœ¨æœ€å" class="headerlink" title="2.å†™åœ¨æœ€å"></a>2.å†™åœ¨æœ€å</h3><hr><p>å¾ˆå¤šæ—¶å€™æƒ³åšä¸€äº›äº‹æƒ…ï¼Œä½†æ˜¯å¦‚æœä½ æ²¡æœ‰æ²‰ä¸‹å¿ƒæ¥åšï¼Œå¾ˆå¤šæ—¶å€™ä½ åªä¼šåœç•™åœ¨æƒ³è±¡çš„é˜¶æ®µï¼Œæ‰€ä»¥åšäº‹è¿˜æ˜¯å¾—åŠ¨æ‰‹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;åšå®¢ä¸Šçš„è¯„è®ºç³»ç»Ÿæ˜¯ç”¨çš„&lt;a href=&quot;https://twikoo.js.org/&quot;&gt;Twikoo&lt;/a&gt;çš„ï¼Œå®ƒæ˜¯æœ‰è¯„è®ºé‚®ä»¶æé†’åŠŸèƒ½çš„ï¼Œæˆ‘å°è¯•äº†ä½†æ˜¯æ²¡æœ‰æˆåŠŸï¼Œæ‰€ä»¥å°±æƒ³ç”¨ä¹‹å‰çš„è‡ªå·±æ­çš„&lt;code&gt;Serveré…±&lt;/code&gt;æ¥å®ç°æ–°è¯„è®ºæé†’åŠŸèƒ½ã€‚&lt;</summary>
      
    
    
    
    
    <category term="Node-RED" scheme="https://www.wangxingyang.com/tags/Node-RED/"/>
    
    <category term="Twikoo" scheme="https://www.wangxingyang.com/tags/Twikoo/"/>
    
    <category term="è¯„è®º" scheme="https://www.wangxingyang.com/tags/%E8%AF%84%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>Homebridgeå’ŒNode-REDç»„åˆ</title>
    <link href="https://www.wangxingyang.com/node-red.html"/>
    <image>https://www.wangxingyang.com/img/20220317/cover.jpg</image>
    
    <id>https://www.wangxingyang.com/node-red.html</id>
    <published>2022-03-17T00:43:12.000Z</published>
    <updated>2022-03-17T07:07:14.254Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ€è¿‘æœ‰å¼€å§‹æŠ˜è…¾äº†ï¼Œæ ‘è“æ´¾åˆæ•´å‡ºæ¥äº†ã€‚ä¹‹å‰ç³»ç»Ÿæ€»æ˜¯å´©ï¼Œæ‰€ä»¥è¿™æ¬¡ç»™ä»–åˆ·åŸç”Ÿçš„ç³»ç»Ÿã€‚å‡†å¤‡æŠŠè·¯ç”±å™¨ä¸Šçš„<code>Node-RED</code>å’Œ<code>Homebridge</code>ç»™è¿ç§»åˆ°è¿™ä¸ªä¸Šé¢ã€‚è™½ç„¶ä¹‹å‰è¿è¡Œçš„ç‹ ç¨³å®šï¼Œä½†æ˜¯æ ‘è“æ´¾æ€»åƒç°ä¹Ÿä¸å¥½ã€‚</p></blockquote><h3 id="0-æ ‘è“æ´¾æ•£çƒ­"><a href="#0-æ ‘è“æ´¾æ•£çƒ­" class="headerlink" title="0.æ ‘è“æ´¾æ•£çƒ­"></a>0.æ ‘è“æ´¾æ•£çƒ­</h3><hr><p>æ ‘è“æ´¾ä¹‹å‰å£³å­ä¸Šçš„é£æ‰‡åäº†ï¼Œè½¬èµ·æ¥çš„å£°éŸ³è´¼å¤§ï¼Œæ‰€ä»¥è€ƒè™‘ç»™ä»–æ¢ä¸€ä¸ªé£æ‰‡ï¼Œè¿™ä¸ç½‘ä¸Šä¹°äº†ä¸€ä¸ªï¼Œå›æ¥è£…ä¸Šåï¼Œæ•ˆæœéå¸¸ä¸é”™ï¼Œæ¸©åº¦åŸºæœ¬ç¨³å®šåœ¨<code>50åº¦</code>ä»¥ä¸‹ï¼Œè€Œä¸”éå¸¸çš„é™éŸ³ã€‚è¿™ä¸ªé£æ‰‡æ˜¯PWNè°ƒé€Ÿçš„ï¼Œç…§ç€è®¾ç½®äº†ä¸‹ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># ä¿®æ”¹/boot/config.txt å¢åŠ å¦‚ä¸‹å†…å®¹dtoverlay=gpio-fan,gpiopin=18,temp=55000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸‹å›¾æ˜¯æˆ‘ä¹°çš„é£æ‰‡ã€‚åšå·¥ä¸é”™ï¼Œå€¼å¾—æ¨è<br><img src="/img/20220317/ad32742fe75ea4827e8ca54ef6dcf4ae.jpg" alt="PWNé£æ‰‡"></p><h3 id="1-å®¶åº­ä¸­æ¢è‡ªåŠ¨å……ç”µ"><a href="#1-å®¶åº­ä¸­æ¢è‡ªåŠ¨å……ç”µ" class="headerlink" title="1.å®¶åº­ä¸­æ¢è‡ªåŠ¨å……ç”µ"></a>1.å®¶åº­ä¸­æ¢è‡ªåŠ¨å……ç”µ</h3><hr><p>ä¹‹å‰è·¯ç”±å™¨é‡å¯äº†ä¸‹ï¼Œ<code>Homebridge</code>çš„ç›¸å…³é…ç½®å°±æ²¡äº†ï¼Œè¿™å°±æ›´åŠ åšå®šäº†è¿ç§»åˆ°æ ‘è“æ´¾ä¸Šçš„å†³å¿ƒã€‚æ‰€ä»¥å°±ä¸‰ä¸‹äº”é™¤äºŒæ•´äº†èµ·æ¥ï¼Œæ•´å¥½ä¹‹åæƒ³åœ¨å¤–é¢æ§åˆ¶çš„è¯å°±å¾—æœ‰<code>å®¶åº­ä¸­æ¢</code>ä¹‹å‰çš„<strong>iPad mini</strong>å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œç”¨äº†ä¸€æ®µæ—¶é—´ï¼Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿™ä¸ª<strong>iPad</strong>å¹³æ—¶ä¸ä¼šç”¨ï¼Œæ‰€ä»¥å°±ä¸ä¼šå……ç”µï¼Œç”¨ä¸€æ®µæ—¶é—´åï¼Œç”µæ± æ²¡ç”µäº†ï¼Œå¯¼è‡´åœ¨å¤–é¢å°±æ§åˆ¶ä¸äº†å®¶ä¸­çš„è®¾å¤‡äº†ã€‚æ‰€ä»¥å°±å¼€å§‹æ‰¾è§£å†³æ–¹æ¡ˆäº†ã€‚æœ€åç»ˆäºç»™æˆ‘æ•´åˆ°äº†ï¼Œä¸‹é¢å°±å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘çš„æ•´çš„æµç¨‹å§ã€‚</p><h4 id="0-Homebridgeå®‰è£…"><a href="#0-Homebridgeå®‰è£…" class="headerlink" title="0.Homebridgeå®‰è£…"></a>0.Homebridgeå®‰è£…</h4><p>è¿™ä¸ªè¿‡ç¨‹å°±ä¸å¤šè¯´äº†ï¼Œç½‘ä¸Šéƒ½æœ‰çš„ï¼Œæ‰€ä»¥å’±å°±ä¸æ•´äº†å‚çœ‹<a href="https://sspai.com/post/59636#!">HomeBridge æ“ä½œæŒ‡å—ï¼šä»é›¶å¼€å§‹ï¼Œå°†ä½ çš„ç±³å®¶è®¾å¤‡æ¥å…¥ Homekit</a>è¿™ä¸ªæ–‡ç« å§ã€‚</p><h4 id="1-å®‰è£…Node-RED"><a href="#1-å®‰è£…Node-RED" class="headerlink" title="1.å®‰è£…Node-RED"></a>1.å®‰è£…Node-RED</h4><p>è¿™è¾¹ä¹Ÿä¸è¯´äº†ï¼Œæ”¾ä¸ªå®˜ç½‘çš„è¿æ¥<a href="https://nodered.org/docs/getting-started/raspberrypi">Running on Raspberry Pi</a>ï¼Œå‚çœ‹è¿™ä¸ªå°±å®‰è£…<code>Node-RED</code>ã€‚ä¸‹é¢å°±å¼€å§‹æ•´äº†</p><h4 id="2-æµç¨‹ç®€ä»‹"><a href="#2-æµç¨‹ç®€ä»‹" class="headerlink" title="2.æµç¨‹ç®€ä»‹"></a>2.æµç¨‹ç®€ä»‹</h4><p>é¦–å…ˆå¾—èƒ½è·å¾—<strong>iPad</strong>çš„å½“å‰çš„çŠ¶æ€ï¼Œåœ¨GitHubä¸Šæ‰¾äº†ä¸‹ï¼Œæ‰¾åˆ°äº†è¿™ä¸ª<code>node-red-contrib-apple-find-me</code>æ’ä»¶ï¼Œé€šè¿‡ä»–å°±èƒ½è·å¾—æˆ‘ä»¬æ‰€æœ‰è®¾å¤‡çš„çŠ¶æ€ã€‚é‡Œé¢çš„ä¿¡æ¯å¾ˆå¤šï¼Œå…¶ä»–çš„éƒ½ä¸è¦ï¼Œè¦å½“å‰æ‰‹æœºçš„ç”µé‡å’Œæ˜¯å¦åœ¨å……ç”µçš„çŠ¶æ€å°±è¡Œã€‚è¿™ä¸ªç»“æœä¹Ÿè¢«æˆ‘æ¨åˆ°è·¯ç”±å™¨çš„ä¸Šé¢ã€‚è¿™ä¸ªåé¢ç”¨æ¥åš<strong>Homebridge</strong>çš„æ’ä»¶ã€‚æå®Œä¹‹åçš„æµç¨‹æ˜¯è¿™æ ·çš„ã€‚</p><p><img src="/img/20220317/19d22e3dc625bc9bd1038b1b703505da.jpg" alt="æµ"></p><p>æµç¨‹æ˜¯é€šè¿‡<code>Apple Find Me</code>æ‹¿åˆ°ç›¸å…³çŠ¶æ€ï¼Œç„¶åç»è¿‡é€»è¾‘åˆ¤æ–­ï¼Œå‘é€æŠ¥æ–‡åˆ°<strong>MQTT</strong>çš„<code>plugswitch</code>è¿™ä¸ªä¸»é¢˜ä¸Šã€‚åœ¨è·¯ç”±å™¨ä¸Šå†™äº†ä¸€ä¸ªè®¢é˜…è¿™ä¸ªä¸»é¢˜çš„ç¨‹åºï¼Œæ¥æ”¶åˆ°åï¼Œé€šè¿‡<code>python-miio</code>æ¥æ§åˆ¶å¼€å…³çš„çŠ¶æ€ï¼Œå½“ç„¶è¿™ä¸€æ­¥ä½ å¯ä»¥ç›´æ¥å®‰è£…<strong>miio</strong>æ’ä»¶å®Œæˆä¹Ÿæ˜¯å¯ä»¥çš„ã€‚åˆ°æ­¤å°±å®Œæˆäº†å®¶åº­ä¸­æ¢çš„è‡ªåŠ¨å……ç”µäº†ã€‚</p><h3 id="2-Homebridgeçš„å‘¨è¾¹"><a href="#2-Homebridgeçš„å‘¨è¾¹" class="headerlink" title="2.Homebridgeçš„å‘¨è¾¹"></a>2.Homebridgeçš„å‘¨è¾¹</h3><hr><h4 id="0-ç”µæ± çŠ¶æ€æ˜¾ç¤º"><a href="#0-ç”µæ± çŠ¶æ€æ˜¾ç¤º" class="headerlink" title="0.ç”µæ± çŠ¶æ€æ˜¾ç¤º"></a>0.ç”µæ± çŠ¶æ€æ˜¾ç¤º</h4><p>ä¸Šé¢æ¨åˆ°è·¯ç”±å™¨ä¸Šçš„æ•°æ®å†™äº†ä¸€ä¸ªè·å¾—å½“å‰çŠ¶æ€çš„æ’ä»¶ã€‚<br><img src="/img/20220317/3c8b4717928cb4e10032eb6bf2e4c818.jpg" alt="æ’ä»¶å±•ç¤º"><br>ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">homebridge-appledevice/â”œâ”€â”€ index.jsâ””â”€â”€ package.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢çš„æ˜¯ä»£ç ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> inherits <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>inherits<span class="token punctuation">;</span><span class="token keyword">const</span> version <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">;</span><span class="token keyword">let</span> Service<span class="token punctuation">;</span><span class="token keyword">let</span> Characteristic<span class="token punctuation">;</span><span class="token keyword">let</span> logger<span class="token punctuation">;</span><span class="token keyword">let</span> <span class="token constant">API</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">homebridge</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token constant">API</span><span class="token operator">=</span>homebridge<span class="token punctuation">;</span>Service <span class="token operator">=</span> homebridge<span class="token punctuation">.</span>hap<span class="token punctuation">.</span>Service<span class="token punctuation">;</span>Characteristic <span class="token operator">=</span> homebridge<span class="token punctuation">.</span>hap<span class="token punctuation">.</span>Characteristic<span class="token punctuation">;</span>homebridge<span class="token punctuation">.</span><span class="token function">registerAccessory</span><span class="token punctuation">(</span><span class="token string">'homebridge-appledevice'</span><span class="token punctuation">,</span> <span class="token string">'AppleDevice'</span><span class="token punctuation">,</span> AppleDevice<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">AppleDevice</span><span class="token punctuation">(</span><span class="token parameter">log<span class="token punctuation">,</span> config</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>logger <span class="token operator">=</span> log<span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>services <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> config<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">'iPad'</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> config<span class="token punctuation">.</span>num <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>interval<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">360000</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>displayName <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>statusLowBattery <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>batteryLevel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>chargingState <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token class-name">AppleDevice</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function-variable function">updateStatus</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">const</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://192.168.xxx.xxx/_api/home'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">resp</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>            resp<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                data <span class="token operator">+=</span> chunk<span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        resp<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">let</span> devices <span class="token operator">=</span> ret<span class="token punctuation">.</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>home_devices<span class="token punctuation">;</span>                <span class="token keyword">let</span> devList <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>devices<span class="token punctuation">)</span><span class="token punctuation">;</span>                that<span class="token punctuation">.</span>batteryLevel <span class="token operator">=</span> devList<span class="token punctuation">[</span>that<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">[</span>that<span class="token punctuation">.</span>num<span class="token punctuation">]</span><span class="token punctuation">.</span>batteryLevel<span class="token punctuation">;</span>                that<span class="token punctuation">.</span>displayName <span class="token operator">=</span> devList<span class="token punctuation">[</span>that<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">[</span>that<span class="token punctuation">.</span>num<span class="token punctuation">]</span><span class="token punctuation">.</span>displayName<span class="token punctuation">;</span>                <span class="token keyword">let</span> status <span class="token operator">=</span> devList<span class="token punctuation">[</span>that<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">[</span>that<span class="token punctuation">.</span>num<span class="token punctuation">]</span><span class="token punctuation">.</span>batteryState<span class="token punctuation">;</span>                <span class="token comment">//console.log("batteryLevel: " + that.batteryLevel);</span>                <span class="token comment">//console.log("status: " + status);</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"NotCharging"</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    that<span class="token punctuation">.</span>batteryService<span class="token punctuation">.</span><span class="token function">setCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>ChargingState<span class="token punctuation">,</span> Characteristic<span class="token punctuation">.</span>ChargingState<span class="token punctuation">.</span><span class="token constant">NOT_CHARGING</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                    that<span class="token punctuation">.</span>batteryService<span class="token punctuation">.</span><span class="token function">setCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>ChargingState<span class="token punctuation">,</span> Characteristic<span class="token punctuation">.</span>ChargingState<span class="token punctuation">.</span><span class="token constant">CHARGING</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                                <span class="token keyword">if</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>batteryLevel <span class="token operator">&lt;=</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    that<span class="token punctuation">.</span>batteryService<span class="token punctuation">.</span><span class="token function">setCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>StatusLowBattery<span class="token punctuation">,</span> Characteristic<span class="token punctuation">.</span>StatusLowBattery<span class="token punctuation">.</span><span class="token constant">BATTERY_LEVEL_LOW</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                    that<span class="token punctuation">.</span>batteryService<span class="token punctuation">.</span><span class="token function">setCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>StatusLowBattery<span class="token punctuation">,</span> Characteristic<span class="token punctuation">.</span>StatusLowBattery<span class="token punctuation">.</span><span class="token constant">BATTERY_LEVEL_NORMAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                                that<span class="token punctuation">.</span>batteryService<span class="token punctuation">.</span><span class="token function">getCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>BatteryLevel<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>batteryLevel<span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Error: "</span> <span class="token operator">+</span> err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function-variable function">identify</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function-variable function">getServices</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>serviceInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Service<span class="token punctuation">.</span>AccessoryInformation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>serviceInfo        <span class="token punctuation">.</span><span class="token function">setCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>Manufacturer<span class="token punctuation">,</span> <span class="token string">'Apple'</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">setCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>Model<span class="token punctuation">,</span> <span class="token string">"Battery"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">setCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>SerialNumber<span class="token punctuation">,</span> <span class="token string">"1353234"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">setCharacteristic</span><span class="token punctuation">(</span>Characteristic<span class="token punctuation">.</span>FirmwareRevision<span class="token punctuation">,</span> version<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>batteryService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Service<span class="token punctuation">.</span>BatteryService</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>serviceInfo <span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>batteryService<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-Scriptableæ’ä»¶"><a href="#1-Scriptableæ’ä»¶" class="headerlink" title="1.Scriptableæ’ä»¶"></a>1.Scriptableæ’ä»¶</h4><p>è¿™ä¸ªæ’ä»¶æ˜¯çœŸçš„å¥½çœ‹ï¼Œä¸è¿‡ä¸€å¼€å§‹é‡åˆ°ä¸€ä¸ªå‘ï¼Œä¸Šé¢çš„å›¾æ ‡ä¸èƒ½ä¸‹è½½ä¸‹æ¥ï¼Œä¸€ç›´æŠ¥é”™ï¼Œæœ€åè‡ªå·±ä¸‹è½½ä¸‹æ¥æ”¾è¿›å»å°±å¯ä»¥çš„ã€‚<br><img src="/img/20220317/da07027bd952f37b952cf653fe6926bb.jpg" alt="å°ç»„ä»¶"></p><h3 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3.æ€»ç»“"></a>3.æ€»ç»“</h3><hr><p>åé¢åœ¨ä¼˜åŒ–å†æ•´å“ˆï¼Œå­¦æ— æ­¢å¢ƒã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ€è¿‘æœ‰å¼€å§‹æŠ˜è…¾äº†ï¼Œæ ‘è“æ´¾åˆæ•´å‡ºæ¥äº†ã€‚ä¹‹å‰ç³»ç»Ÿæ€»æ˜¯å´©ï¼Œæ‰€ä»¥è¿™æ¬¡ç»™ä»–åˆ·åŸç”Ÿçš„ç³»ç»Ÿã€‚å‡†å¤‡æŠŠè·¯ç”±å™¨ä¸Šçš„&lt;code&gt;Node-RED&lt;/code&gt;å’Œ&lt;code&gt;Homebridge&lt;/code&gt;ç»™è¿ç§»åˆ°è¿™ä¸ªä¸Šé¢ã€‚è™½ç„¶ä¹‹å‰è¿è¡Œçš„ç‹ ç¨³å®šï¼Œä½†æ˜¯æ ‘è“æ´¾æ€»åƒç°ä¹Ÿä¸å¥½ã€‚</summary>
      
    
    
    
    <category term="æ™ºèƒ½å®¶å±…" scheme="https://www.wangxingyang.com/categories/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/"/>
    
    
    <category term="Node-RED" scheme="https://www.wangxingyang.com/tags/Node-RED/"/>
    
    <category term="HomeBridge" scheme="https://www.wangxingyang.com/tags/HomeBridge/"/>
    
    <category term="æ ‘è“æ´¾" scheme="https://www.wangxingyang.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
</feed>
